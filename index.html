<!DOCTYPE html>
<html>
<head>
  <title>Sight Words Master</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;600&display=swap');
    
    * { box-sizing: border-box; }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif; 
      text-align: center; 
      margin: 0; 
      padding: 20px; 
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); 
      min-height: 100vh; 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      justify-content: center;
    }
    .container { 
      background: rgba(255, 255, 255, 0.9); 
      backdrop-filter: blur(10px); 
      border-radius: 24px; 
      padding: 40px 30px; 
      max-width: 400px; 
      width: 100%; 
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1); 
      animation: fadeIn 0.5s ease-out;
    }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    h1 { 
      color: #1d1d1f; 
      font-weight: 600; 
      font-size: 28px; 
      margin: 0 0 20px 0; 
      letter-spacing: -0.5px;
    }
    p { 
      color: #86868b; 
      font-size: 16px; 
      margin: 0 0 30px 0; 
      line-height: 1.4;
    }
    input { 
      font-size: 24px; 
      padding: 16px 20px; 
      border: 2px solid #d2d2d7; 
      border-radius: 12px; 
      width: 100%; 
      max-width: 280px; 
      margin-bottom: 20px; 
      background: white; 
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    input:focus { 
      outline: none; 
      border-color: #007AFF; 
      box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
    }
    button { 
      font-size: 18px; 
      font-weight: 500; 
      padding: 14px 28px; 
      margin: 8px; 
      border: none; 
      border-radius: 12px; 
      cursor: pointer; 
      transition: all 0.2s ease; 
      min-width: 120px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }
    button:hover { transform: translateY(-1px); box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12); }
    button:active { transform: translateY(0); }
    #listen { background: linear-gradient(135deg, #ff9500, #ff7b00); color: white; }
    #practiceToggle { background: linear-gradient(135deg, #af52de, #8b34bc); color: white; font-size: 16px; padding: 12px; }
    .check-btn { background: linear-gradient(135deg, #007AFF, #0056b3); color: white; }
    .next-btn { background: #e5e5ea; color: #1d1d1f; }
    #result { 
      font-size: 32px; 
      margin: 30px 0; 
      padding: 20px; 
      border-radius: 12px; 
      animation: slideIn 0.3s ease-out;
      min-height: 60px; 
      display: flex; 
      align-items: center; 
      justify-content: center;
    }
    @keyframes slideIn { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
    #result.correct { background: rgba(0, 200, 83, 0.1); color: #34c759; border: 1px solid rgba(52, 199, 89, 0.2); }
    #result.wrong { background: rgba(255, 59, 48, 0.1); color: #ff3b30; border: 1px solid rgba(255, 59, 48, 0.2); }
    a { 
      color: #007AFF; 
      font-size: 16px; 
      text-decoration: none; 
      font-weight: 500;
    }
    a:hover { text-decoration: underline; }
    #flashWord { 
      font-size: 48px; 
      font-weight: 600; 
      color: #ff9500; 
      margin: 20px 0; 
      padding: 20px; 
      background: rgba(255, 149, 0, 0.05); 
      border-radius: 12px; 
      display: none; 
      animation: pulse 0.5s ease-in-out;
    }
    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    #score { 
      font-size: 20px; 
      font-weight: 600; 
      color: #1d1d1f; 
      background: rgba(0, 122, 255, 0.1); 
      padding: 8px 16px; 
      border-radius: 20px; 
      display: inline-block;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>‚ú® Sight Words Master</h1>
    <p>Listen to the sight word, then type it! Or toggle Practice Mode for flashcards.</p>
    <button id="practiceToggle" onclick="toggleMode()">üìö Practice Mode (Off)</button>
    <div id="flashWord"></div>
    <button id="listen" onclick="speak()">üîä Listen</button>
    <br>
    <input type="text" id="answer" placeholder="Type the word here">
    <br>
    <button class="check-btn" onclick="check()">‚úÖ Check Answer</button>
    <button class="next-btn" onclick="next()">‚û°Ô∏è Next Word</button>
    <div id="result"></div>
    <p>Score: <span id="score">0</span></p>
  </div>

  <script>
    const words = [
      // Original 3rd Grade Dolch (41)
      "about","better","bring","carry","clean","cut","done","draw","drink","eight","fall","far","full","got","grow","hold","hot","hurt","if","keep","kind","laugh","light","long","much","myself","never","only","own","pick","seven","shall","show","six","small","start","ten","think","today","together","try","warm",
      // +46 Dolch 2nd Grade
      "always","around","because","been","before","best","both","buy","call","cold","does","dont","fast","first","five","found","gave","goes","green","its","made","many","off","or","pull","read","right","sing","sit","sleep","tell","their","these","those","upon","us","use","very","wash","which","why","wish","work","would","write","your",
      // +54 Fry 2nd/3rd Grade level (first 54 of Second 100)
      "after","again","air","also","america","animal","another","answer","any","around","ask","away","back","because","before","big","boy","came","change","different","does","end","even","follow","form","found","give","good","great","hand","help","here","home","house","just","kind","know","land","large","learn","letter","line","little","live","man","me","means","men","most","mother","move","much","must","name"
    ];
    let current = "";
    let score = 0;
    let practiceMode = false;

    function toggleMode() {
      practiceMode = !practiceMode;
      document.getElementById("practiceToggle").innerText = practiceMode ? "üéØ Quiz Mode (Audio Only)" : "üìö Practice Mode (Flashcards)";
      if (practiceMode) {
        next(); // Start with flash
      }
    }

    function next() {
      current = words[Math.floor(Math.random()*words.length)];
      document.getElementById("answer").value = "";
      document.getElementById("result").className = "";
      document.getElementById("result").innerHTML = "";
      document.getElementById("flashWord").style.display = "none";
      if (practiceMode) {
        // Flash the word briefly for learning
        document.getElementById("flashWord").innerText = current;
        document.getElementById("flashWord").style.display = "block";
        speak();
        setTimeout(() => {
          document.getElementById("flashWord").style.display = "none";
        }, 2000); // Show for 2 seconds
      } else {
        speak(); // Auto-speak in quiz mode
      }
    }

    function speak() {
      if ('speechSynthesis' in window) {
        let voices = speechSynthesis.getVoices();
        let utterance = new SpeechSynthesisUtterance(current);
        
        // Strictly prioritize iPhone Siri voice: Samantha (or variants) for en-US
        let preferredVoice = voices.find(voice => 
          voice.lang.startsWith('en-US') && 
          (voice.name.toLowerCase().includes('samantha') || 
           (voice.name.toLowerCase().includes('siri') && voice.gender === 'female') ||
           (voice.name.toLowerCase().includes('alex') && voice.gender === 'male'))
        ) || voices.find(voice => 
          voice.name.toLowerCase().includes('natural') && voice.lang.startsWith('en-US')
        ) || voices.find(voice => 
          voice.lang.startsWith('en-US') && voice.gender === 'female'
        ) || voices[0];
        
        utterance.voice = preferredVoice;
        utterance.rate = 0.7; // Natural Siri-like pace: clear but not robotic
        utterance.pitch = 1.0; // Neutral, warm tone
        utterance.volume = 1;
        
        speechSynthesis.speak(utterance);
      } else {
        alert("Sorry, your device doesn't support voice. Try on a phone or computer.");
      }
    }

    function check() {
      let typed = document.getElementById("answer").value.trim().toLowerCase();
      let resultDiv = document.getElementById("result");
      let learnLink = `<br><a href="https://www.dictionary.com/browse/${current}" target="_blank">üìñ Learn more about ${current}</a>`;
      if (typed === current.toLowerCase()) {
        resultDiv.innerHTML = "Correct! ‚≠ê" + learnLink;
        resultDiv.className = "correct";
        score++;
        speak(); // Reinforce by re-speaking on correct
      } else {
        resultDiv.innerHTML = `Wrong. It's <b>${current}</b>.${learnLink} (listen again!)`;
        resultDiv.className = "wrong";
        speak(); // Re-speak on wrong for practice
      }
      document.getElementById("score").innerText = score;
    }

    // Load voices (iOS Safari quirk: voices load async)
    speechSynthesis.onvoiceschanged = () => {
      if (speechSynthesis.getVoices().length > 0) {
        next();
      }
    };
    if (speechSynthesis.getVoices().length === 0) {
      setTimeout(next, 100); // Small delay for iOS
    } else {
      next(); // Fallback
    }
  </script>
</body>
</html>
