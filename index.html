<!DOCTYPE html>
<html lang="en">
<head>
  <title>Sight Words with MVK</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Sight Words Dojo">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --safe-top: env(safe-area-inset-top);
      --safe-bottom: env(safe-area-inset-bottom);
      --safe-left: env(safe-area-inset-left);
      --safe-right: env(safe-area-inset-right);
    }
    * { box-sizing: border-box; }
    body { 
      font-family: 'Open Sans', sans-serif; 
      text-align: center; 
      margin: 0; 
      padding: calc(var(--safe-top) + 10px) calc(var(--safe-left) + 10px) calc(var(--safe-bottom) + 10px) calc(var(--safe-right) + 10px);
      background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%); 
      min-height: 100vh; 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      justify-content: center;
      color: #1a237e;
      overflow-x: hidden;
      -webkit-text-size-adjust: 100%; /* Prevent iOS zoom on input */
    }
    .container { 
      background: white; 
      border-radius: 20px; 
      padding: 30px 20px; 
      max-width: 360px; 
      width: 100%; 
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1); 
      display: grid;
      grid-template-rows: auto auto 1fr auto auto; 
      gap: 20px;
      min-height: 100vh; /* Full-screen fill */
      position: relative;
    }
    @media (orientation: landscape) {
      body { padding: calc(var(--safe-top) + 5px) calc(var(--safe-left) + 5px) calc(var(--safe-bottom) + 5px) calc(var(--safe-right) + 5px); }
      .container { min-height: 100vh; padding: 20px 15px; gap: 15px; }
      h1 { font-size: 24px; }
      input { font-size: 24px; padding: 16px 20px; }
      button { font-size: 18px; padding: 14px 28px; min-width: 120px; }
    }
    h1 { 
      color: #1976d2; 
      font-weight: 700; 
      font-size: 28px; 
      margin: 0; 
      grid-row: 1;
    }
    .description { 
      color: #5c6bc0; 
      font-size: 16px; 
      margin: 0; 
      line-height: 1.4;
      grid-row: 2;
    }
    .streak { 
      background: linear-gradient(135deg, #4caf50, #66bb6a); 
      color: white; 
      padding: 10px 20px; 
      border-radius: 25px; 
      font-size: 18px; 
      font-weight: 600;
      grid-row: 2;
      align-self: center;
      animation: pulse 2s infinite; 
    }
    @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(76, 175, 80, 0); } 100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); } }
    input { 
      font-size: 28px; 
      padding: 20px 24px; 
      border: 3px solid #e3f2fd; 
      border-radius: 50px; 
      width: 100%; 
      max-width: 300px; 
      margin: 0 auto; 
      background: #fafafa; 
      transition: all 0.2s ease;
      grid-row: 4;
      min-height: 60px; /* 44px+ touch target */
    }
    input:focus { 
      outline: none; 
      border-color: #1976d2; 
      box-shadow: 0 0 0 4px rgba(25, 118, 210, 0.1);
      transform: scale(1.02);
    }
    .buttons { 
      display: flex; 
      justify-content: center; 
      gap: 16px; 
      flex-wrap: wrap;
      grid-row: 4;
      margin-top: 20px;
    }
    button { 
      font-size: 22px; 
      font-weight: 600; 
      padding: 18px 36px; /* 44px+ height */
      border: none; 
      border-radius: 50px; 
      cursor: pointer; 
      transition: all 0.3s ease; 
      min-width: 140px;
      min-height: 60px; /* Touch-friendly */
      color: white;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }
    button:hover, button:active { transform: translateY(-2px) scale(1.05); box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15); }
    button:active { transform: translateY(0) scale(1); }
    #listen { background: linear-gradient(135deg, #ff9800, #f57c00); grid-row: 3; padding: 18px 36px; font-size: 22px; min-height: 60px; }
    #practiceToggle { background: linear-gradient(135deg, #9c27b0, #7b1fa2); font-size: 16px; padding: 14px 24px; border-radius: 30px; grid-row: 2; align-self: center; min-width: auto; min-height: 50px; }
    .check-btn { background: linear-gradient(135deg, #4caf50, #66bb6a); }
    .next-btn { background: linear-gradient(135deg, #2196f3, #42a5f5); }
    #result { 
      font-size: 24px; 
      font-weight: 600;
      margin: 0; 
      padding: 24px; 
      border-radius: 20px; 
      animation: slideIn 0.4s ease-out;
      height: 100px; 
      display: flex; 
      flex-direction: column;
      align-items: center; 
      justify-content: center;
      grid-row: 5;
    }
    @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    #result.correct { background: linear-gradient(135deg, #e8f5e8, #c8e6c9); color: #2e7d32; border: 2px solid #4caf50; }
    #result.correct::after { content: 'üåü Level Up!'; margin-top: 8px; font-size: 18px; }
    #result.wrong { background: linear-gradient(135deg, #ffebee, #ffcdd2); color: #c62828; border: 2px solid #ef5350; }
    a { 
      color: #1976d2; 
      font-size: 16px; 
      text-decoration: none; 
      font-weight: 600;
      margin-top: 8px;
    }
    a:hover { text-decoration: underline; }
    #flashWord { 
      font-size: 48px; 
      font-weight: 700; 
      color: #ff9800; 
      margin: 0; 
      padding: 24px; 
      background: linear-gradient(135deg, #fff3e0, #ffe0b2); 
      border-radius: 20px; 
      display: none; 
      animation: bounce 0.6s ease-in-out;
      grid-row: 3;
    }
    @keyframes bounce { 0%, 20%, 50%, 80%, 100% { transform: translateY(0); } 40% { transform: translateY(-10px); } 60% { transform: translateY(-5px); } }
    .score { 
      font-size: 20px; 
      font-weight: 700; 
      color: white; 
      background: linear-gradient(135deg, #1976d2, #42a5f5); 
      padding: 12px 24px; 
      border-radius: 50px; 
      display: inline-block;
      grid-row: 6;
      box-shadow: 0 4px 15px rgba(25, 118, 210, 0.3);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìñ Sight Words Adventure</h1>
    <div class="description">
      <p>Listen & type to build your streak! Toggle for flashcards.</p>
      <button id="practiceToggle" onclick="toggleMode()">üìö Practice Mode (Off)</button>
    </div>
    <div id="flashWord"></div>
    <button id="listen" onclick="speak()">üîä Listen</button>
    <input type="text" id="answer" placeholder="Type here..." autocomplete="off">
    <div class="buttons">
      <button class="check-btn" onclick="check()">‚úÖ Check!</button>
      <button class="next-btn" onclick="next()">‚û°Ô∏è Next</button>
    </div>
    <div id="result"></div>
    <div class="score">Streak: <span id="score">0</span> üåü</div>
  </div>

  <script>
    const words = [
      "about","better","bring","carry","clean","cut","done","draw","drink","eight","fall","far","full","got","grow","hold","hot","hurt","if","keep","kind","laugh","light","long","much","myself","never","only","own","pick","seven","shall","show","six","small","start","ten","think","today","together","try","warm",
      "always","around","because","been","before","best","both","buy","call","cold","does","dont","fast","first","five","found","gave","goes","green","its","made","many","off","or","pull","read","right","sing","sit","sleep","tell","their","these","those","upon","us","use","very","wash","which","why","wish","work","would","write","your",
      "after","again","air","also","america","animal","another","answer","any","around","ask","away","back","because","before","big","boy","came","change","different","does","end","even","follow","form","found","give","good","great","hand","help","here","home","house","just","kind","know","land","large","learn","letter","line","little","live","man","me","means","men","most","mother","move","much","must","name"
    ];
    let current = "";
    let score = 0;
    let practiceMode = false;

    function toggleMode() {
      practiceMode = !practiceMode;
      document.getElementById("practiceToggle").innerText = practiceMode ? "üéØ Quiz Mode" : "üìö Practice Mode";
      if (practiceMode) next();
    }

    function next() {
      current = words[Math.floor(Math.random()*words.length)];
      document.getElementById("answer").value = "";
      document.getElementById("result").innerHTML = "";
      document.getElementById("result").className = "";
      document.getElementById("flashWord").style.display = "none";
      if (practiceMode) {
        document.getElementById("flashWord").innerText = current;
        document.getElementById("flashWord").style.display = "block";
        speak();
        setTimeout(() => { document.getElementById("flashWord").style.display = "none"; }, 2000);
      } else {
        speak();
      }
    }

    function speak() {
      if ('speechSynthesis' in window) {
        let voices = speechSynthesis.getVoices();
        let utterance = new SpeechSynthesisUtterance(current);
        let preferredVoice = voices.find(voice => 
          voice.lang.startsWith('en-US') && 
          (voice.name.toLowerCase().includes('samantha') || 
           (voice.name.toLowerCase().includes('siri') && voice.gender === 'female') ||
           (voice.name.toLowerCase().includes('alex') && voice.gender === 'male'))
        ) || voices.find(voice => 
          voice.name.toLowerCase().includes('natural') && voice.lang.startsWith('en-US')
        ) || voices.find(voice => 
          voice.lang.startsWith('en-US') && voice.gender === 'female'
        ) || voices[0];
        utterance.voice = preferredVoice;
        utterance.rate = 0.7; 
        utterance.pitch = 1.0; 
        utterance.volume = 1;
        speechSynthesis.speak(utterance);
      } else {
        alert("Voice not supported‚Äîtry on iPhone Safari!");
      }
    }

    function check() {
      let typed = document.getElementById("answer").value.trim().toLowerCase();
      let resultDiv = document.getElementById("result");
      let learnLink = `<br><a href="https://www.dictionary.com/browse/${current}" target="_blank">üìñ Learn more!</a>`;
      if (typed === current.toLowerCase()) {
        resultDiv.innerHTML = "Yes! Keep the streak! ‚≠ê" + learnLink;
        resultDiv.className = "correct";
        score++;
        speak();
      } else {
        resultDiv.innerHTML = `Close! It's <b>${current}</b>${learnLink}`;
        resultDiv.className = "wrong";
        score = 0; 
        speak();
      }
      document.getElementById("score").innerText = score;
    }

    speechSynthesis.onvoiceschanged = () => {
      if (speechSynthesis.getVoices().length > 0) next();
    };
    if (speechSynthesis.getVoices().length === 0) {
      setTimeout(next, 100);
    } else {
      next();
    }
  </script>
</body>
</html>
