<!DOCTYPE html>
<html>
<head>
  <title>Spelling Master</title>
  <style>
    body { font-family: Arial; text-align: center; margin-top: 50px; background: #f0f8ff; }
    h1 { color: #3366cc; }
    input { font-size: 30px; padding: 10px; }
    button { font-size: 30px; padding: 15px 30px; margin: 20px; background: #4CAF50; color: white; border: none; cursor: pointer; }
    #result { font-size: 40px; margin: 30px; }
    #listen { background: #ff9800; }
  </style>
</head>
<body>
  <h1>4th Grade Spelling Practice</h1>
  <p>Listen to the word, then type it!</p>
  <button id="listen" onclick="speak()">ðŸ”Š Listen</button>
  <br>
  <input type="text" id="answer" placeholder="Type the word here">
  <br>
  <button onclick="check()">Check Answer</button>
  <button onclick="next()">Next Word</button>
  <div id="result"></div>
  <p>Score: <span id="score">0</span></p>

  <script>
    const words = ["receive","believe","tomorrow","beautiful","different","environment","government","necessary","separate","knowledge"];
    let current = "";
    let score = 0;

    function next() {
      current = words[Math.floor(Math.random()*words.length)];
      document.getElementById("answer").value = "";
      document.getElementById("result").innerText = "";
      speak(); // Auto-speak the new word
    }

    function speak() {
      if ('speechSynthesis' in window) {
        let voices = speechSynthesis.getVoices();
        let utterance = new SpeechSynthesisUtterance(current);
        
        // Pick the best natural kid voice (Ana if available, else Google/Microsoft natural)
        let preferredVoice = voices.find(voice => 
          voice.name.includes('Ana') && voice.lang.startsWith('en-US')
        ) || voices.find(voice => 
          voice.name.includes('Natural') && voice.lang.startsWith('en-US')
        ) || voices.find(voice => 
          voice.lang.startsWith('en-US') && voice.gender === 'female'
        ) || voices[0]; // Fallback to first voice
        
        utterance.voice = preferredVoice;
        utterance.rate = 0.7; // Slower & clearer for kids
        utterance.pitch = 1.1; // Slightly higher for friendly tone
        utterance.volume = 1;
        
        speechSynthesis.speak(utterance);
      } else {
        alert("Sorry, your device doesn't support voice. Try on a phone or computer.");
      }
    }

    // Load voices when ready (some browsers need this)
    if (speechSynthesis.onvoiceschanged !== undefined) {
      speechSynthesis.onvoiceschanged = next;
    } else {
      next(); // Start if already loaded
    }
  </script>
</body>
</html>
